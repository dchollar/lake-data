<!DOCTYPE html>
<html lang="en-US" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Pipe Lake Jobs</title>

    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/ico/apple-touch-icon.png}"/>
    <link rel="icon" sizes="32x32" th:href="@{/ico/favicon-32x32.png}" type="image/png"/>
    <link rel="icon" sizes="16x16" th:href="@{/ico/favicon-16x16.png}" type="image/png"/>
    <link rel="manifest" th:href="@{/ico/site.webmanifest}"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" rel="stylesheet"/>
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css" rel="stylesheet" type="text/css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js" type="text/javascript"></script>
</head>
<body>

<nav class="navbar navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand" th:href="@{/index}">Pipe Lake Data</a>
    <div class="container-fluid">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" th:href="@{/public/page/documents}">Documents</a></li>
            <li class="nav-item"><a class="nav-link" href="https://pipelakes.org/">Pipe Lake District</a></li>
            <li class="nav-item"><a class="nav-link" href="https://dnr.wi.gov/lakes/lakepages/LakeDetail.aspx?wbic=2490500">DNR Pipe Lake</a></li>
            <li class="nav-item" sec:authorize="hasAnyRole('ROLE_REPORTER','ROLE_ADMIN')"><a class="nav-link" th:href="@{/page/dataEntry}">Enter Data</a></li>
            <li class="nav-item dropdown" sec:authorize="hasAnyRole('ROLE_DOCUMENT_ADMIN','ROLE_ADMIN')">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="nav-maintenance">Maintenance</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" th:href="@{/page/documentMaintenance}">Documents</a>
                    <div sec:authorize="hasRole('ROLE_ADMIN')">
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" th:href="@{/page/fundingSourceMaintenance}">Funding Sources</a>
                        <a class="dropdown-item" th:href="@{/page/characteristicMaintenance}">Characteristics</a>
                        <a class="dropdown-item" th:href="@{/page/locationMaintenance}">Locations</a>
                        <a class="dropdown-item" th:href="@{/page/characteristicLocationMaintenance}">Characteristic Locations</a>
                        <a class="dropdown-item" th:href="@{/page/dataMaintenance}">Measurements</a>
                        <a class="dropdown-item" th:href="@{/page/dataFileUpload}">Data File Upload</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" th:href="@{/page/userMaintenance}">Users</a>
                        <a class="dropdown-item" th:href="@{/page/audit}">Audit</a>
                        <a class="dropdown-item active" th:href="@{/page/jobs}">Job Maintenance</a>
                        <a class="dropdown-item" th:href="@{/swagger-ui.html}">API Documentation</a>
                    </div>
                </div>
            </li>
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item" sec:authorize="isAnonymous()"><a class="nav-link" th:href="@{/login}"><i aria-hidden="true" class="fas fa-sign-in-alt"></i>Login</a></li>
            <li class="nav-item" sec:authorize="isAuthenticated()"><a class="nav-link" th:href="@{/logout}"><i aria-hidden="true" class="fas fa-sign-out-alt"></i>Logout</a></li>
        </ul>
    </div>
</nav>

<div class="container-fluid text-center">
    <div class="row content">
        <div class="col-sm-1" id="selectionDiv">
            <div class="container"></div>
        </div>

        <div class="col-sm-11 text-left" id="resultDiv">
            <span class="bg-danger text-white" id="message"></span><br>
            <div class="container-fluid">
                <p>The following buttons allow you to run the normally scheduled jobs on demand. These jobs normally run in the background on a scheduled basis.
                    This page allows you to run these jobs as soon as you push the button. When the job is complete you will be returned to the home page.
                    It may take several minutes for the job to complete.</p>
                <p></p>
                <a class="btn btn-info" th:href="@{/jobs/swims}">Collect SWIMS Data since beginning of time</a>
                <p></p>
                <a class="btn btn-info" th:href="@{/jobs/swims?currentYear=true}">Collect SWIMS Data for current year</a>
                <p></p>
                <a class="btn btn-info" th:href="@{/jobs/audit/truncate}">Truncate audit logs</a>
                <p></p>
                <a class="btn btn-info" th:href="@{/jobs/ftp/process}">Process FTP files</a>
                <p></p>
            </div>
        </div>
    </div>
</div>

<footer class="page-footer bg-primary text-light font-small">
    <div class="container-fluid text-center font-weight-light">
        <div class="row">
            <div class="col-sm-2 text-left">
                <p><small><a th:href="@{/public/page/privacy}" class="btn btn-primary">Privacy Statement</a></small></p>
            </div>
            <div class="col-sm-8"></div>
            <div class="col-sm-2 text-right">
                <p><small>Version: <span th:text="${version}"></span></small></p>
            </div>
        </div>
    </div>
</footer>

</body>
</html>
